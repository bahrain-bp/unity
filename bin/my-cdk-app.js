"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const cdk = require("aws-cdk-lib");
//import { MyCdkStack } from "../lib/my-cdk-app-stack";
const DBstack_1 = require("../lib/DBstack"); // Import your DBStack
const api_stack_1 = require("../lib/api-stack"); // Import your APIStack
const frontend_deployment_stack_1 = require("../lib/frontend-deployment-stack");
const opensearch_stack_1 = require("../lib/opensearch_stack");
const bedrock_stack_1 = require("../lib/bedrock_stack");
const index_stack_1 = require("../lib/index_stack");
const app = new cdk.App();
// Create the DBStack
const dbStack = new DBstack_1.DBStack(app, "Unity-DBStack", {
// Any custom stack props you may have for DBStack
});
// Create the APIStack, passing in the DBStack as a dependency
new api_stack_1.APIStack(app, "Unity-APIStack", dbStack); // Pass the DBStack as the second argument
// Optionally, you can create your other stacks here if needed
// new MyCdkStack(app, "MyCdkAppStack");
const openSearchStack = new opensearch_stack_1.OpenSearchStack(app, 'Unity-OpenSearchStack', {
    env: {
        account: process.env.CDK_DEFAULT_ACCOUNT,
        region: process.env.CDK_DEFAULT_REGION || 'us-east-1'
    }
});
const indexStack = new index_stack_1.IndexStack(app, 'Unity-IndexStack', {
    openSearchStack,
    env: {
        account: process.env.CDK_DEFAULT_ACCOUNT,
        region: process.env.CDK_DEFAULT_REGION || 'us-east-1'
    }
});
const bedrockStack = new bedrock_stack_1.BedrockStack(app, 'Unity-BedrockStack', {
    openSearchStack,
    indexStack,
    env: {
        account: process.env.CDK_DEFAULT_ACCOUNT,
        region: process.env.CDK_DEFAULT_REGION || 'us-east-1'
    }
});
indexStack.addDependency(openSearchStack);
bedrockStack.addDependency(indexStack);
new frontend_deployment_stack_1.FrontendDeploymentStack(app, "Unity-FrontendDeploymentStack");
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXktY2RrLWFwcC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIm15LWNkay1hcHAudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxtQ0FBbUM7QUFDbkMsdURBQXVEO0FBQ3ZELDRDQUF5QyxDQUFDLHNCQUFzQjtBQUNoRSxnREFBNEMsQ0FBQyx1QkFBdUI7QUFDcEUsZ0ZBQTJFO0FBQzNFLDhEQUEwRDtBQUMxRCx3REFBb0Q7QUFDcEQsb0RBQWdEO0FBRWhELE1BQU0sR0FBRyxHQUFHLElBQUksR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBRTFCLHFCQUFxQjtBQUNyQixNQUFNLE9BQU8sR0FBRyxJQUFJLGlCQUFPLENBQUMsR0FBRyxFQUFFLGVBQWUsRUFBRTtBQUNoRCxrREFBa0Q7Q0FDbkQsQ0FBQyxDQUFDO0FBRUgsOERBQThEO0FBQzlELElBQUksb0JBQVEsQ0FBQyxHQUFHLEVBQUUsZ0JBQWdCLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQywwQ0FBMEM7QUFFeEYsOERBQThEO0FBQzlELHdDQUF3QztBQUd4QyxNQUFNLGVBQWUsR0FBRyxJQUFJLGtDQUFlLENBQUMsR0FBRyxFQUFFLHVCQUF1QixFQUFFO0lBQ3hFLEdBQUcsRUFBRTtRQUNILE9BQU8sRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLG1CQUFtQjtRQUN4QyxNQUFNLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsSUFBSSxXQUFXO0tBQ3REO0NBQ0YsQ0FBQyxDQUFDO0FBRUgsTUFBTSxVQUFVLEdBQUcsSUFBSSx3QkFBVSxDQUFDLEdBQUcsRUFBRSxrQkFBa0IsRUFBRTtJQUN6RCxlQUFlO0lBQ2YsR0FBRyxFQUFFO1FBQ0gsT0FBTyxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsbUJBQW1CO1FBQ3hDLE1BQU0sRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLGtCQUFrQixJQUFJLFdBQVc7S0FDdEQ7Q0FDRixDQUFDLENBQUM7QUFFSCxNQUFNLFlBQVksR0FBRyxJQUFJLDRCQUFZLENBQUMsR0FBRyxFQUFFLG9CQUFvQixFQUFFO0lBQy9ELGVBQWU7SUFDZixVQUFVO0lBQ1YsR0FBRyxFQUFFO1FBQ0gsT0FBTyxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsbUJBQW1CO1FBQ3hDLE1BQU0sRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLGtCQUFrQixJQUFJLFdBQVc7S0FDdEQ7Q0FDRixDQUFDLENBQUM7QUFFSCxVQUFVLENBQUMsYUFBYSxDQUFDLGVBQWUsQ0FBQyxDQUFDO0FBQzFDLFlBQVksQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLENBQUM7QUFFdkMsSUFBSSxtREFBdUIsQ0FBQyxHQUFHLEVBQUUsK0JBQStCLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGNkayBmcm9tIFwiYXdzLWNkay1saWJcIjtcclxuLy9pbXBvcnQgeyBNeUNka1N0YWNrIH0gZnJvbSBcIi4uL2xpYi9teS1jZGstYXBwLXN0YWNrXCI7XHJcbmltcG9ydCB7IERCU3RhY2sgfSBmcm9tIFwiLi4vbGliL0RCc3RhY2tcIjsgLy8gSW1wb3J0IHlvdXIgREJTdGFja1xyXG5pbXBvcnQgeyBBUElTdGFjayB9IGZyb20gXCIuLi9saWIvYXBpLXN0YWNrXCI7IC8vIEltcG9ydCB5b3VyIEFQSVN0YWNrXHJcbmltcG9ydCB7IEZyb250ZW5kRGVwbG95bWVudFN0YWNrIH0gZnJvbSBcIi4uL2xpYi9mcm9udGVuZC1kZXBsb3ltZW50LXN0YWNrXCI7XHJcbmltcG9ydCB7IE9wZW5TZWFyY2hTdGFjayB9IGZyb20gJy4uL2xpYi9vcGVuc2VhcmNoX3N0YWNrJztcclxuaW1wb3J0IHsgQmVkcm9ja1N0YWNrIH0gZnJvbSAnLi4vbGliL2JlZHJvY2tfc3RhY2snO1xyXG5pbXBvcnQgeyBJbmRleFN0YWNrIH0gZnJvbSAnLi4vbGliL2luZGV4X3N0YWNrJztcclxuXHJcbmNvbnN0IGFwcCA9IG5ldyBjZGsuQXBwKCk7XHJcblxyXG4vLyBDcmVhdGUgdGhlIERCU3RhY2tcclxuY29uc3QgZGJTdGFjayA9IG5ldyBEQlN0YWNrKGFwcCwgXCJVbml0eS1EQlN0YWNrXCIsIHtcclxuICAvLyBBbnkgY3VzdG9tIHN0YWNrIHByb3BzIHlvdSBtYXkgaGF2ZSBmb3IgREJTdGFja1xyXG59KTtcclxuXHJcbi8vIENyZWF0ZSB0aGUgQVBJU3RhY2ssIHBhc3NpbmcgaW4gdGhlIERCU3RhY2sgYXMgYSBkZXBlbmRlbmN5XHJcbm5ldyBBUElTdGFjayhhcHAsIFwiVW5pdHktQVBJU3RhY2tcIiwgZGJTdGFjayk7IC8vIFBhc3MgdGhlIERCU3RhY2sgYXMgdGhlIHNlY29uZCBhcmd1bWVudFxyXG5cclxuLy8gT3B0aW9uYWxseSwgeW91IGNhbiBjcmVhdGUgeW91ciBvdGhlciBzdGFja3MgaGVyZSBpZiBuZWVkZWRcclxuLy8gbmV3IE15Q2RrU3RhY2soYXBwLCBcIk15Q2RrQXBwU3RhY2tcIik7XHJcblxyXG5cclxuY29uc3Qgb3BlblNlYXJjaFN0YWNrID0gbmV3IE9wZW5TZWFyY2hTdGFjayhhcHAsICdVbml0eS1PcGVuU2VhcmNoU3RhY2snLCB7XHJcbiAgZW52OiB7XHJcbiAgICBhY2NvdW50OiBwcm9jZXNzLmVudi5DREtfREVGQVVMVF9BQ0NPVU5ULFxyXG4gICAgcmVnaW9uOiBwcm9jZXNzLmVudi5DREtfREVGQVVMVF9SRUdJT04gfHwgJ3VzLWVhc3QtMSdcclxuICB9XHJcbn0pO1xyXG5cclxuY29uc3QgaW5kZXhTdGFjayA9IG5ldyBJbmRleFN0YWNrKGFwcCwgJ1VuaXR5LUluZGV4U3RhY2snLCB7XHJcbiAgb3BlblNlYXJjaFN0YWNrLFxyXG4gIGVudjoge1xyXG4gICAgYWNjb3VudDogcHJvY2Vzcy5lbnYuQ0RLX0RFRkFVTFRfQUNDT1VOVCxcclxuICAgIHJlZ2lvbjogcHJvY2Vzcy5lbnYuQ0RLX0RFRkFVTFRfUkVHSU9OIHx8ICd1cy1lYXN0LTEnXHJcbiAgfVxyXG59KTtcclxuXHJcbmNvbnN0IGJlZHJvY2tTdGFjayA9IG5ldyBCZWRyb2NrU3RhY2soYXBwLCAnVW5pdHktQmVkcm9ja1N0YWNrJywge1xyXG4gIG9wZW5TZWFyY2hTdGFjayxcclxuICBpbmRleFN0YWNrLFxyXG4gIGVudjoge1xyXG4gICAgYWNjb3VudDogcHJvY2Vzcy5lbnYuQ0RLX0RFRkFVTFRfQUNDT1VOVCxcclxuICAgIHJlZ2lvbjogcHJvY2Vzcy5lbnYuQ0RLX0RFRkFVTFRfUkVHSU9OIHx8ICd1cy1lYXN0LTEnXHJcbiAgfVxyXG59KTtcclxuXHJcbmluZGV4U3RhY2suYWRkRGVwZW5kZW5jeShvcGVuU2VhcmNoU3RhY2spO1xyXG5iZWRyb2NrU3RhY2suYWRkRGVwZW5kZW5jeShpbmRleFN0YWNrKTtcclxuXHJcbm5ldyBGcm9udGVuZERlcGxveW1lbnRTdGFjayhhcHAsIFwiVW5pdHktRnJvbnRlbmREZXBsb3ltZW50U3RhY2tcIik7XHJcbiJdfQ==