"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.handler = void 0;
const client_dynamodb_1 = require("@aws-sdk/client-dynamodb");
const lib_dynamodb_1 = require("@aws-sdk/lib-dynamodb");
const ddb = lib_dynamodb_1.DynamoDBDocumentClient.from(new client_dynamodb_1.DynamoDBClient({}));
const TABLE = process.env.CONNECTIONS_TABLE;
const handler = async (event) => {
    const connectionId = event.requestContext.connectionId;
    await ddb.send(new lib_dynamodb_1.DeleteCommand({
        TableName: TABLE,
        Key: { connectionId },
    }));
    return { statusCode: 200, body: "Disconnected." };
};
exports.handler = handler;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid3MtZGlzY29ubmVjdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIndzLWRpc2Nvbm5lY3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQ0EsOERBQTBEO0FBQzFELHdEQUcrQjtBQUUvQixNQUFNLEdBQUcsR0FBRyxxQ0FBc0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxnQ0FBYyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDaEUsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxpQkFBa0IsQ0FBQztBQUV0QyxNQUFNLE9BQU8sR0FBRyxLQUFLLEVBQUUsS0FBc0MsRUFBRSxFQUFFO0lBQ3RFLE1BQU0sWUFBWSxHQUFHLEtBQUssQ0FBQyxjQUFjLENBQUMsWUFBYSxDQUFDO0lBRXhELE1BQU0sR0FBRyxDQUFDLElBQUksQ0FDWixJQUFJLDRCQUFhLENBQUM7UUFDaEIsU0FBUyxFQUFFLEtBQUs7UUFDaEIsR0FBRyxFQUFFLEVBQUUsWUFBWSxFQUFFO0tBQ3RCLENBQUMsQ0FDSCxDQUFDO0lBRUYsT0FBTyxFQUFFLFVBQVUsRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLGVBQWUsRUFBRSxDQUFDO0FBQ3BELENBQUMsQ0FBQztBQVhXLFFBQUEsT0FBTyxXQVdsQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFQSUdhdGV3YXlQcm94eVdlYnNvY2tldEV2ZW50VjIgfSBmcm9tIFwiYXdzLWxhbWJkYVwiO1xyXG5pbXBvcnQgeyBEeW5hbW9EQkNsaWVudCB9IGZyb20gXCJAYXdzLXNkay9jbGllbnQtZHluYW1vZGJcIjtcclxuaW1wb3J0IHtcclxuICBEeW5hbW9EQkRvY3VtZW50Q2xpZW50LFxyXG4gIERlbGV0ZUNvbW1hbmQsXHJcbn0gZnJvbSBcIkBhd3Mtc2RrL2xpYi1keW5hbW9kYlwiO1xyXG5cclxuY29uc3QgZGRiID0gRHluYW1vREJEb2N1bWVudENsaWVudC5mcm9tKG5ldyBEeW5hbW9EQkNsaWVudCh7fSkpO1xyXG5jb25zdCBUQUJMRSA9IHByb2Nlc3MuZW52LkNPTk5FQ1RJT05TX1RBQkxFITtcclxuXHJcbmV4cG9ydCBjb25zdCBoYW5kbGVyID0gYXN5bmMgKGV2ZW50OiBBUElHYXRld2F5UHJveHlXZWJzb2NrZXRFdmVudFYyKSA9PiB7XHJcbiAgY29uc3QgY29ubmVjdGlvbklkID0gZXZlbnQucmVxdWVzdENvbnRleHQuY29ubmVjdGlvbklkITtcclxuXHJcbiAgYXdhaXQgZGRiLnNlbmQoXHJcbiAgICBuZXcgRGVsZXRlQ29tbWFuZCh7XHJcbiAgICAgIFRhYmxlTmFtZTogVEFCTEUsXHJcbiAgICAgIEtleTogeyBjb25uZWN0aW9uSWQgfSxcclxuICAgIH0pXHJcbiAgKTtcclxuXHJcbiAgcmV0dXJuIHsgc3RhdHVzQ29kZTogMjAwLCBib2R5OiBcIkRpc2Nvbm5lY3RlZC5cIiB9O1xyXG59O1xyXG4iXX0=